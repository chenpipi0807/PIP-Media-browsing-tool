# PIP 媒体浏览工具

一个基于 React + Node.js 的本地媒体数据筛选，仿照 Pinterest 的瀑布流布局。支持图片和视频文件浏览、多用户收藏、管理员路径配置、无密码登录和实时收藏持久化，非常适合在本地网络环境中快速搭建个人或家庭的媒体分享墙。

<img width="3807" height="1895" alt="image" src="https://github.com/user-attachments/assets/35aec131-5afe-4d38-9672-61fef0738206" />

<img width="3165" height="1587" alt="image" src="https://github.com/user-attachments/assets/e83c53b5-4182-4918-b0e7-6afee15bc78e" />

<img width="3810" height="1884" alt="image" src="https://github.com/user-attachments/assets/502ac912-af07-4a79-b484-9ac5fbb70682" />


## ✨ 功能特性

- **瀑布流布局**: 等宽列的响应式媒体网格，美观地展示您的图片和视频收藏。
- **多媒体支持**: 同时支持图片和视频文件，视频文件带有播放图标标识。
- **无限滚动**: 向下滚动即可自动加载更多媒体文件，提供流畅的浏览体验。
- **用户系统**: 简单的无密码登录，通过用户名区分不同用户。
- **管理员角色**: 特殊用户 `PIP` 可以设置本地媒体文件夹的根目录。
- **个人收藏**: 每位用户都可以收藏自己喜欢的图片和视频，收藏状态会实时保存。
- **跨用户查看**: 可以方便地切换并浏览其他用户的收藏列表。
- **动态布局**: 自由调整媒体显示的列数（1-10列）。
- **真实本地浏览**: 通过Node.js后端服务器真实访问您本地的媒体文件，支持多种图片和视频格式。
- **大屏预览**: 点击任意媒体文件可弹出模态框查看高清图片或播放视频。

## 🚀 快速开始

本项目包含前端React应用和Node.js后端服务器，可以真实地浏览您本地的图片和视频文件。

### 前置要求
- Node.js (版本 18 或更高)
- npm (通常随 Node.js 一起安装)

### 安装步骤
1.  **下载项目**: 克隆或下载本仓库到您的本地计算机。
2.  **安装依赖**: 在项目根目录打开终端，运行：
    ```bash
    npm install
    ```
3.  **启动应用**: 有两种方式启动应用：
    
    **方式一：同时启动前端和后端（推荐）**
    ```bash
    npm run dev:full
    ```
    
    **方式二：分别启动前端和后端**
    ```bash
    # 终端1：启动后端服务器
    npm run server
    
    # 终端2：启动前端开发服务器
    npm run dev
    ```

4.  **访问应用**: 打开数据筛选访问 `http://localhost:5173`

## 📖 使用指南

### 1. 管理员设置 (首次运行)

-   首次访问应用时，会进入登录页面。
-   在用户名输入框中输入 `pip`（不区分大小写），系统会识别您为管理员。
-   此时会出现一个额外的输入框，用于"设置本地媒体根目录"。
-   **重要**: 请输入您电脑上真实存在的媒体文件夹路径（例如 `D:\Photos` 或 `C:\Users\您的用户名\Pictures`）。
-   应用会扫描该路径下的所有媒体文件，支持以下格式：
    - **图片**: .jpg, .jpeg, .png, .gif, .bmp, .webp, .svg, .tiff, .ico, .heic, .avif 等
    - **视频**: .mp4, .avi, .mov, .wmv, .flv, .webm, .mkv, .m4v, .3gp 等
-   输入正确的路径后点击"登录"。

### 2. 普通用户登录

-   在用户名输入框中输入任意您喜欢的用户名（例如 `alice`）。
-   点击"登录"即可进入媒体浏览页面。

### 3. 浏览与交互

-   **顶部工具栏**:
    -   **列数**: 调整瀑布流布局的列数。
    -   **我的收藏**: 打开此开关，将只显示您自己收藏的媒体文件。
    -   **查看收藏**: 从下拉列表中选择其他用户，可以查看他们的公开收藏夹（只读模式）。选择"所有媒体"可返回正常浏览模式。
    -   **退出登录**: 清除您的登录状态并返回登录页面。
-   **收藏媒体**:
    -   鼠标悬停在媒体文件上，右下角会出现一个心形按钮。
    -   点击心形按钮即可收藏或取消收藏该媒体文件。收藏后的按钮会变为红色。
-   **预览媒体**:
    -   直接点击图片，会弹出一个居中模态框，展示该图片的高清版本。
    -   直接点击视频（带播放图标），会弹出一个居中模态框，可以播放视频并使用完整的播放控制。
    -   点击模态框外部的遮罩或右上角的关闭按钮，或按 `ESC` 键可以关闭预览。

## 🎬 支持的媒体格式

### 图片格式
- JPEG (.jpg, .jpeg)
- PNG (.png)
- GIF (.gif)
- BMP (.bmp)
- WebP (.webp)
- SVG (.svg)
- TIFF (.tiff, .tif)
- ICO (.ico)
- HEIC (.heic)
- AVIF (.avif)
- 其他常见格式

### 视频格式
- MP4 (.mp4) - 推荐
- AVI (.avi)
- MOV (.mov)
- WMV (.wmv)
- FLV (.flv)
- WebM (.webm)
- MKV (.mkv)
- M4V (.m4v)
- 3GP (.3gp)

## 🛠️ 技术栈

-   **前端框架**: React + TypeScript
-   **后端服务器**: Node.js + Express
-   **样式**: Tailwind CSS
-   **构建工具**: Vite
-   **数据存储**: 本地文件系统 + localStorage（用户收藏）
-   **媒体处理**: 原生HTML5 `<img>` 和 `<video>` 标签
